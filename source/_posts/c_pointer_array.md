---
title: C语言数组和指针小结
date: 2016-07-19 10:04:57
tags:
---


指针及数组是初学C语言时比较令人头疼的知识点，但是理解了之后用起来十分灵活

# 下标使用的理解
初学数组的时候，老师总是说使用指针的方式访问数组要比下标访问更快更好，但是个人认为并不全对，这个问题要根据不同情况进行分析
1. 对数组或内存进行直接访问
```c
int Data[10];
Data[0] = 0;
*(Data + 0) = 0;
```
    首先要了解的是，编译器对下标的处理其实是跟指针一致的,因此以上写法其实是等价的
    可以通过下面这个有趣的写法去验证，你会发现结果是和上面一样
```c
0[Data]    //编译器会把它看成 *(0 + Data)
```

2. 对数组或内存进行遍历
第一种方法，在访问Data的每一个元素的时候，计算机都要去计算访问的地址，这个过程大概可以理解为：基地址 + 偏移量 * sizeof(int)
```c
int Data[10];
for (int i= 0; i < 10; i ++)
{
    Data[i] = 0;
}
```
    第二种方法，每次加上偏移地址，更加灵活且有效率
```c
int Data[10], *pData;
for (pData= Data; pData < Data + 10; pData++)
{
    *pData = 0;
}
```
因此，一般情况下对于数据的访问，建议使用下标法，这样在一定程度上也能提升代码的可读性
<!--more-->

# 指针的定义

在定义指针的时候*的作用是声明指针，定义时注意应和变量结合而不是类型
```c
int *pA, B;                            //B不是指针
int *pA, pB;                           //pB是指针
typedef int DATA_TYPE,*P_DATA;         //P_DATA是指针
int A,B[10];                           //和数组类似
```

但是为了避免歧义，应该尽量不要把多个变量在一行定义:
```c
int *pA;
int B;
```



